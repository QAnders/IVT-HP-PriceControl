[{"id":"15950a06.34b7f6","type":"function","z":"4b7b595c.a15c08","name":"Format URL","func":"const params = {\n    securityToken: env.get('SECURITY_TOKEN'),\n    priceRegion: '10Y1001A1001A46L' // =Sweden SE3 // env.get('PRICE_REGION')\n};\n\nlet date = new Date(msg.payload);\n// We want date/time as e.g. 20220802, we'll add hours in the URL\ndate = (date.getFullYear() + '' + \n    ('00' + (date.getMonth()+1)).slice(-2) + '' + \n    ('00' + date.getDate()).slice(-2));\n    // ('00' + date.getHours()).slice(-2) \n    // ('00' + date.getMinutes()).slice(-2)\n    // ('00' + date.getSeconds()).slice(-2)\nconst url = `https://web-api.tp.entsoe.eu/api?securityToken=${params.securityToken}&documentType=A44&in_Domain=${params.priceRegion}&out_Domain=${params.priceRegion}&periodStart=${date}0000&periodEnd=${date}0100`;\n\nreturn { url };","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":220,"y":380,"wires":[["df1056f2.de5588","797d2c4.efe84d4"]]}]